{"version":3,"sources":["components/persons.js","components/filter.js","components/personForm.js","services/persons.js","components/notification.js","App.js","index.js"],"names":["Persons","filteredNames","deleteName","map","person","key","name","number","onClick","id","Filter","filter","handleFilterChange","value","onChange","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","personObject","axios","post","then","response","data","get","put","delete","Notification","message","propertyName","className","App","useState","persons","setPersons","setFilter","setFilteredNames","setNewName","setNewNumber","setMessage","setPropertyName","useEffect","personService","initialPersons","catch","err","console","log","event","target","regex","RegExp","test","preventDefault","foundName","find","alert","window","confirm","changedName","returnedName","setTimeout","returnedPersonObject","concat","error","res","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iOAYeA,G,MAVC,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,cAAeC,EAAiB,EAAjBA,WAC9B,OACA,4BACID,EAAcE,KAAI,SAAAC,GAAM,OACtB,wBAAIC,IAAKD,EAAOE,MAAOF,EAAOE,KAA9B,IAAqCF,EAAOG,OAA5C,IAAoD,4BAAQC,QAAW,kBAAMN,EAAWE,EAAOK,MAA3C,iBCI/CC,EARA,SAAC,GAAgC,IAA/BC,EAA8B,EAA9BA,OAAOC,EAAuB,EAAvBA,mBAExB,OACI,kDACwB,2BAAOC,MAASF,EAAQG,SAAUF,MCY/CG,EAhBI,SAAC,GAAoE,IAAnEC,EAAkE,EAAlEA,QAAQC,EAA0D,EAA1DA,QAAQC,EAAkD,EAAlDA,iBAAiBC,EAAiC,EAAjCA,UAAUC,EAAuB,EAAvBA,mBAE9D,OACE,0BAAMC,SAAUL,GAChB,sCACQ,2BAAOH,MAAOI,EAASH,SAAUI,KAEzC,wCACU,2BAAOL,MAAOM,EAAWL,SAAUM,KAE7C,6BACE,4BAAQE,KAAK,UAAb,U,gBCXAC,EAAU,eAwBD,EAtBA,SAAAC,GAEX,OADgBC,IAAMC,KAAKH,EAAQC,GACpBG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAoB9B,EAjBA,WAEX,OADgBJ,IAAMK,IAAIP,GACXI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAe9B,EAZA,SAACpB,EAAGe,GAEf,OADgBC,IAAMM,IAAN,UAAaR,EAAb,YAAwBd,GAAKe,GAC9BG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAU9B,EAPE,SAAApB,GAEd,OADgBgB,IAAMO,OAAN,UAAgBT,EAAhB,YAA2Bd,IAC5BkB,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCP3BI,EAZI,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,aAC7B,OAAgB,OAAZD,EACK,KAIP,yBAAKE,UAAWD,GACbD,IC0KMG,EAxKH,WAAO,IAAD,EAEgBC,mBAAS,IAFzB,mBAERC,EAFQ,KAECC,EAFD,OAGcF,mBAAS,IAHvB,mBAGR3B,EAHQ,KAGA8B,EAHA,OAI4BH,mBAAS,IAJrC,mBAIRrC,EAJQ,KAIOyC,EAJP,OAKgBJ,mBAAS,IALzB,mBAKRrB,EALQ,KAKC0B,EALD,OAMoBL,mBAAS,IAN7B,mBAMRnB,EANQ,KAMGyB,EANH,OAOgBN,mBAAS,MAPzB,mBAORJ,EAPQ,KAOCW,EAPD,OAQ0BP,mBAAS,IARnC,mBAQRH,EARQ,KAQMW,EARN,KAWhBC,qBAAU,WACRC,IAECrB,MAAK,SAAAsB,GACJT,EAAWS,GACXP,EAAiBO,MAElBC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,QAC1B,IAuIF,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcjB,QAAWA,EAASC,aAAgBA,IAClD,kBAAC,EAAD,CAAQxB,OAAUA,EAAQC,mBA9HH,SAAC0C,GAC1Bb,EAAUa,EAAMC,OAAO1C,OAGvB,IAAM2C,EAAQ,IAAIC,OAAJ,UAAcH,EAAMC,OAAO1C,OAAQ,KAGjD6B,EAAiBH,EAAQ5B,QAAO,SAAAP,GAAM,OAAIoD,EAAME,KAAKtD,EAAOE,aAwH1D,yCACA,kBAAC,EAAD,CAAYU,QArHA,SAACsC,GACfA,EAAMK,iBAEN,IAAMnC,EAAe,CACnBlB,KAAMW,EACNV,OAAQY,GAIJyC,EAAYrB,EAAQsB,MAAK,SAAAzD,GAAM,OAAIA,EAAOE,OAASW,KAEzD,GAAmB,KAAdE,GAAkC,KAAZF,EACzB6C,MAAM,mDAEH,GAAgB,KAAZ7C,EACP6C,MAAM,kCAEH,GAAkB,KAAd3C,EACP2C,MAAM,oCAEH,GAAIF,EAAU,CAEjB,GAAIG,OAAOC,QAAP,UAAkB/C,EAAlB,uEAA+F,CAEjG,IAAMgD,EAAW,2BAAOL,GAAP,IAAkBrD,OAAQY,IAG3C6B,EACQY,EAAUnD,GAAIwD,GACrBtC,MAAK,SAAAuC,GACJrB,EAAW,WAAD,OAAY5B,EAAZ,cACV6B,EAAgB,WAChBqB,YAAW,WACTtB,EAAW,QACV,KACHL,EAAWD,EAAQpC,KAAI,SAAAC,GAAM,OAAIA,EAAOK,KAAOmD,EAAUnD,GAAKL,EAAS8D,MACvExB,EAAiBzC,EAAcE,KAAI,SAAAG,GAAI,OAAIA,EAAKG,KAAOmD,EAAUnD,GAAKH,EAAO4D,SAE9EhB,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GACZN,EAAW,kBAAD,OAAmBrB,EAAalB,KAAhC,0CACVwC,EAAgB,QAChBqB,YAAW,WACTtB,EAAW,QACV,KACHL,EAAWD,EAAQ5B,QAAO,SAAAP,GAAM,OAAIA,EAAOK,KAAOmD,EAAUnD,OAC5DiC,EAAiBzC,EAAcU,QAAO,SAAAL,GAAI,OAAIA,EAAKG,KAAOmD,EAAUnD,UAGtEkC,EAAW,IACXC,EAAa,SAOfI,EACQxB,GACPG,MAAK,SAAAyC,GACJvB,EAAW,SAAD,OAAU5B,IACpB6B,EAAgB,WACdqB,YAAW,WACTtB,EAAW,QACV,KACLL,EAAWD,EAAQ8B,OAAOD,IAC1B1B,EAAiBH,EAAQ8B,OAAOD,OAEjClB,OAAM,SAAAC,GACLN,EAAW,GAAD,OAAIM,EAAIvB,SAASC,KAAKyC,QAChCxB,EAAgB,QAChBqB,YAAW,WACTtB,EAAW,QACV,KACHO,QAAQC,IAAIF,EAAIvB,SAASC,KAAKyC,UAEhC7B,EAAU,IACVE,EAAW,IACXC,EAAa,KAuCmB3B,QAAWA,EAASC,iBA1I/B,SAACoC,GACpBX,EAAWW,EAAMC,OAAO1C,QAyIgEM,UAAaA,EAAWC,mBArI3F,SAACkC,GACtBV,EAAaU,EAAMC,OAAO1C,UAqI5B,uCACA,kBAAC,EAAD,CAASZ,cAAiBA,EAAgBC,WApC3B,SAACO,GAElB,IAAMe,EAAee,EAAQsB,MAAK,SAAAzD,GAAM,OAAIA,EAAOK,KAAOA,KAEtDsD,OAAOC,QAAP,iBAAyBxC,EAAalB,KAAtC,SAGF0C,EACUvC,GACTkB,MAAK,SAAA4C,GACJ1B,EAAW,WAAD,OAAYrB,EAAalB,OACjCwC,EAAgB,WAChBqB,YAAW,WACTtB,EAAW,QACV,QAENK,OAAM,SAAAC,GACLN,EAAW,kBAAD,OAAmBrB,EAAalB,KAAhC,0CACVwC,EAAgB,QAChBqB,YAAW,WACTtB,EAAW,QACV,QAEDL,EAAWD,EAAQ5B,QAAO,SAAAP,GAAM,OAAIA,EAAOK,KAAOA,MAClDiC,EAAiBzC,EAAcU,QAAO,SAAAL,GAAI,OAAIA,EAAKG,KAAOA,YC3JpE+D,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.88d18dc4.chunk.js","sourcesContent":["import React from 'react';\n\nconst Persons = ({ filteredNames, deleteName }) => {\n    return (\n    <ul>\n       {filteredNames.map(person => \n          <li key={person.name}>{person.name} {person.number} <button onClick = {() => deleteName(person.id)}>Delete</button></li>\n        )}\n    </ul>\n    )\n  }\n\nexport default Persons;\n","import React from 'react';\n\nconst Filter = ({filter,handleFilterChange}) =>{\n  \nreturn(\n    <div>\n          filter shown with <input value = {filter} onChange={handleFilterChange}/>\n    </div>\n)\n}\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({addName,newName,handleNameChange,newNumber,handleNumberChange}) =>{\n  \n  return(\n    <form onSubmit={addName}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange}/>\n    </div>\n    <div>\n      number: <input value={newNumber} onChange={handleNumberChange}/>\n      </div>\n    <div>\n      <button type=\"submit\" >add</button>\n    </div>\n  </form>\n  )\n}\nexport default PersonForm;","import axios from 'axios';\n\nconst baseUrl = '/api/persons'\n\nconst create = personObject => {\n    const request = axios.post(baseUrl,personObject)\n    return request.then(response => response.data)\n}\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst update = (id,personObject) => {\n    const request = axios.put(`${baseUrl}/${id}`,personObject)\n    return request.then(response => response.data)\n}\n\nconst deleteId = id => {\n   const request = axios.delete(`${baseUrl}/${id}`)\n   return request.then(response => response.data)\n}\n\n\n\nexport default { create, getAll, update, deleteId }","import React from 'react'\n\nconst Notification = ({ message, propertyName }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className={propertyName}>\n        {message}\n      </div>\n    )\n  }\n\n  export default Notification;","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport './index.css'\nimport Persons from './components/persons.js';\nimport Filter from './components/filter.js';\nimport PersonForm from './components/personForm.js';\nimport personService from './services/persons.js';\nimport Notification from './components/notification.js';\n\n\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]) \n  const [ filter, setFilter ] = useState('')\n  const [ filteredNames, setFilteredNames ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ message, setMessage ] = useState(null) \n  const [ propertyName, setPropertyName ] = useState('')\n\n  //Request to get data from the server\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(initialPersons => {\n      setPersons(initialPersons)\n      setFilteredNames(initialPersons)\n    })\n    .catch(err => console.log(err))\n  },[])\n  \n  //Function to handle changes in the name input\n  const handleNameChange = (event) => {\n        setNewName(event.target.value)\n  }\n\n  //Function to handle changes in the number input\n  const handleNumberChange = (event) =>{\n        setNewNumber(event.target.value)\n  }\n  \n  //Function to handle changes in the filter input\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n\n    //Getting the regex pattern to filter the search\n    const regex = new RegExp(`${event.target.value}`,\"i\")\n\n    //Setting filteredNames to entries that match the search\n    setFilteredNames(persons.filter(person => regex.test(person.name)))\n}\n\n  //Function to add an entry\n  const addName = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    \n    //Checking if new entry is already in the phonebook\n    const foundName = persons.find(person => person.name === newName)\n\n    if ((newNumber === '') && (newName === '')){\n      alert('Please Enter a valid name and phone number')\n    }\n    else if (newName === ''){\n      alert('Please Enter a valid name')\n    }\n    else if (newNumber === ''){\n      alert('Please Enter a phone number')\n    }\n    else if (foundName){\n\n      if (window.confirm(`${newName} is already added to phonebook, replace old number with a new one?`)){\n        \n        const changedName = {...foundName, number: newNumber}\n        \n        //Request to update a person's number if name is already in phonebook\n        personService\n        .update(foundName.id, changedName)\n        .then(returnedName => {\n          setMessage(`Changed ${newName}'s number`)\n          setPropertyName('success')\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setPersons(persons.map(person => person.id !== foundName.id ? person : returnedName))\n          setFilteredNames(filteredNames.map(name => name.id !== foundName.id ? name : returnedName))\n        })\n        .catch(err => {\n          console.log(err)\n          setMessage(`Information of ${personObject.name} has already been removed from server`)\n          setPropertyName('fail')\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          setPersons(persons.filter(person => person.id !== foundName.id))\n          setFilteredNames(filteredNames.filter(name => name.id !== foundName.id))\n      })\n      }\n        setNewName('')\n        setNewNumber('')\n    } \n    \n    \n    else {\n      \n      //Request to create a new entry\n      personService\n      .create(personObject)\n      .then(returnedPersonObject => {\n        setMessage(`Added ${newName}`)\n        setPropertyName('success')\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        setPersons(persons.concat(returnedPersonObject))\n        setFilteredNames(persons.concat(returnedPersonObject))\n      })\n      .catch(err => {\n        setMessage(`${err.response.data.error}`)\n        setPropertyName('fail')\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        console.log(err.response.data.error)\n      })\n      setFilter('')\n      setNewName('')\n      setNewNumber('')\n    } \n  }\n  \n  //Function to delete an entry\n  const deleteName = (id) => {\n\n    const personObject = persons.find(person => person.id === id)\n\n    if (window.confirm(`Delete ${personObject.name} ?`)){\n\n      //Request to delete an entry from the phonebook\n      personService\n      .deleteId(id) \n      .then(res => {\n        setMessage(`Deleted ${personObject.name}`)\n          setPropertyName('success')\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n      })\n      .catch(err => {\n        setMessage(`Information of ${personObject.name} has already been removed from server`)\n        setPropertyName('fail')\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n          setPersons(persons.filter(person => person.id !== id))\n          setFilteredNames(filteredNames.filter(name => name.id !== id))\n    }\n    }\n    \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message = {message} propertyName = {propertyName}/>\n      <Filter filter = {filter} handleFilterChange = {handleFilterChange}/>\n      <h3>Add a new</h3>\n      <PersonForm addName = {addName} newName = {newName} handleNameChange = {handleNameChange} newNumber = {newNumber} handleNumberChange = {handleNumberChange}/>\n      <h3>Numbers</h3>\n      <Persons filteredNames = {filteredNames}  deleteName = {deleteName}/>\n    </div>\n  )\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}